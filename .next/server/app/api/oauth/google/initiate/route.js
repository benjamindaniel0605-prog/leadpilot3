"use strict";(()=>{var e={};e.id=919,e.ids=[919],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2262:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>d,originalPathname:()=>P,patchFetch:()=>_,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>m});var o={};r.r(o),r.d(o,{GET:()=>l,runtime:()=>u});var a=r(5419),s=r(9108),i=r(9678),n=r(8070);let u="nodejs";async function l(e){try{let{searchParams:t}=new URL(e.url),r=t.get("returnUrl")||"/settings",o=process.env.GOOGLE_CLIENT_ID,a=`${process.env.NEXT_PUBLIC_SITE_URL}/api/oauth/google/callback`;if(!o)return console.error("GOOGLE_CLIENT_ID manquant dans les variables d'environnement"),n.Z.redirect(new URL("/settings?error=oauth_config_missing",e.url));let s=new URL("https://accounts.google.com/o/oauth2/v2/auth");return s.searchParams.set("client_id",o),s.searchParams.set("redirect_uri",a),s.searchParams.set("response_type","code"),s.searchParams.set("scope","https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile"),s.searchParams.set("access_type","offline"),s.searchParams.set("prompt","consent"),s.searchParams.set("state",r),console.log("\uD83D\uDD17 Redirection vers Google OAuth:",s.toString()),n.Z.redirect(s)}catch(t){return console.error("❌ Erreur lors de l'initiation OAuth Google:",t),n.Z.redirect(new URL("/settings?error=oauth_init_failed",e.url))}}let c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/oauth/google/initiate/route",pathname:"/api/oauth/google/initiate",filename:"route",bundlePath:"app/api/oauth/google/initiate/route"},resolvedPagePath:"C:\\Users\\benja\\Desktop\\LeadPilot SaaS\\LeadPilot\\app\\api\\oauth\\google\\initiate\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:h,headerHooks:d,staticGenerationBailout:m}=c,P="/api/oauth/google/initiate/route";function _(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206],()=>r(2262));module.exports=o})();