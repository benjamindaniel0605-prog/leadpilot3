"use strict";(()=>{var e={};e.id=884,e.ids=[884],e.modules={2823:e=>{e.exports=require("@supabase/ssr")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5528:e=>{e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1713:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>I,originalPathname:()=>h,patchFetch:()=>j,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>x});var a={};s.r(a),s.d(a,{POST:()=>l});var r=s(5419),i=s(9108),o=s(9678),n=s(8070),u=s(2823),p=s(2455);async function l(e,{params:t}){try{let s=await (0,p.cookies)(),a=(0,u.createServerClient)("https://ghuifzsvtjafmykroivw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdodWlmenN2dGphZm15a3JvaXZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyOTgxODUsImV4cCI6MjA2OTg3NDE4NX0.ekmuogfgI6VuewDIlGnOWUf_vVWhP0D4fn-Ukfel4rw",{cookies:{get:e=>s.get(e)?.value,set(e,t,a){s.set({name:e,value:t,...a})},remove(e,t){s.set({name:e,value:"",...t})}}}),{data:{user:r},error:i}=await a.auth.getUser();if(i||!r)return n.Z.json({message:"Non autoris\xe9"},{status:401});let{action:o}=await e.json(),l=t.id;if(!o||!["use","open"].includes(o))return n.Z.json({message:"Action invalide"},{status:400});let c={templateId:l,action:o,timestamp:new Date().toISOString(),userId:r.id};return console.log("Template stats updated:",c),n.Z.json({success:!0,message:`Statistique ${o} mise \xe0 jour pour le template ${l}`,stats:c})}catch(e){return console.error("Erreur mise \xe0 jour stats template:",e),n.Z.json({message:"Erreur lors de la mise \xe0 jour des statistiques",error:e instanceof Error?e.message:"Erreur inconnue"},{status:500})}}let c=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/templates/[id]/stats/route",pathname:"/api/templates/[id]/stats",filename:"route",bundlePath:"app/api/templates/[id]/stats/route"},resolvedPagePath:"C:\\Users\\benja\\Desktop\\LeadPilot SaaS\\LeadPilot\\app\\api\\templates\\[id]\\stats\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:I,staticGenerationBailout:x}=c,h="/api/templates/[id]/stats/route";function j(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,206,455],()=>s(1713));module.exports=a})();